<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Vuex详解 | 三月三</title><meta name="description" content="认识VuexVuex是做什么的?Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用 集中式存储管理 应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。Vuex 也集成到 Vue 的官方调试工具 devtools extension，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。 状态管理到底是什么？ 状态管理模式、集中式"><meta name="keywords" content="Vue,js"><meta name="author" content="三月三"><meta name="copyright" content="三月三"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="http://cdn.panyucable.cn/zysheep/ico.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="dns-prefetch" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vuex详解"><meta name="twitter:description" content="认识VuexVuex是做什么的?Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用 集中式存储管理 应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。Vuex 也集成到 Vue 的官方调试工具 devtools extension，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。 状态管理到底是什么？ 状态管理模式、集中式"><meta name="twitter:image" content="http://cdn.panyucable.cn/zysheep/vue_cover2.jfif"><meta property="og:type" content="article"><meta property="og:title" content="Vuex详解"><meta property="og:url" content="https://zysheep.cn/2020/03/08/Vue/Vuex%E8%AF%A6%E8%A7%A3/"><meta property="og:site_name" content="三月三"><meta property="og:description" content="认识VuexVuex是做什么的?Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用 集中式存储管理 应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。Vuex 也集成到 Vue 的官方调试工具 devtools extension，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。 状态管理到底是什么？ 状态管理模式、集中式"><meta property="og:image" content="http://cdn.panyucable.cn/zysheep/vue_cover2.jfif"><meta property="article:published_time" content="2020-03-07T22:30:45.000Z"><meta property="article:modified_time" content="2020-06-29T09:50:40.824Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://zysheep.cn/2020/03/08/Vue/Vuex%E8%AF%A6%E8%A7%A3/"><link rel="prev" title="Promise的使用" href="https://zysheep.cn/2020/03/08/Vue/Promise%E7%9A%84%E4%BD%BF%E7%94%A8/"><link rel="next" title="网络模块封装axios" href="https://zysheep.cn/2020/03/08/Vue/%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9D%97%E5%B0%81%E8%A3%85axios/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7f671f0f6d996680d21d5c32a23a9313";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://zysheep.github.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/hideCategory.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="http://cdn.panyucable.cn/zysheep/xiaoman.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">213</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">50</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">71</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bug" aria-hidden="true"></i><span> 编程路线</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/java/"><i class="fa-fw fa fa-coffee"></i><span> Java</span></a></li><li><a class="site-page" href="/python/"><i class="fa-fw fa fa-binoculars"></i><span> Python</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 面试宝典</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/interview/"><i class="fa-fw fa fa-file-text-o"></i><span> Java面试题</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 我的生活</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-picture-o"></i><span> Gallery</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#认识Vuex"><span class="toc-number">1.</span> <span class="toc-text">认识Vuex</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Vuex是做什么的"><span class="toc-number">1.1.</span> <span class="toc-text">Vuex是做什么的?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#管理什么状态呢"><span class="toc-number">1.2.</span> <span class="toc-text">管理什么状态呢?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单界面的状态管理"><span class="toc-number">1.3.</span> <span class="toc-text">单界面的状态管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单界面状态管理的实现"><span class="toc-number">1.4.</span> <span class="toc-text">单界面状态管理的实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多界面状态管理"><span class="toc-number">1.5.</span> <span class="toc-text">多界面状态管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vuex基本使用"><span class="toc-number">2.</span> <span class="toc-text">Vuex基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装使用Vuex"><span class="toc-number">2.1.</span> <span class="toc-text">安装使用Vuex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简单的案例"><span class="toc-number">2.2.</span> <span class="toc-text">简单的案例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Vuex核心概念"><span class="toc-number">3.</span> <span class="toc-text">Vuex核心概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#State"><span class="toc-number">4.</span> <span class="toc-text">State</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#State单一状态树"><span class="toc-number">4.1.</span> <span class="toc-text">State单一状态树</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Getters"><span class="toc-number">5.</span> <span class="toc-text">Getters</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Getters基本使用"><span class="toc-number">5.1.</span> <span class="toc-text">Getters基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Getters作为参数和传递参数"><span class="toc-number">5.2.</span> <span class="toc-text">Getters作为参数和传递参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mutation"><span class="toc-number">6.</span> <span class="toc-text">Mutation</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Mutation状态更新"><span class="toc-number">6.1.</span> <span class="toc-text">Mutation状态更新</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutation传递参数"><span class="toc-number">6.1.1.</span> <span class="toc-text">Mutation传递参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutation提交风格"><span class="toc-number">6.1.2.</span> <span class="toc-text">Mutation提交风格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutation响应规则"><span class="toc-number">6.1.3.</span> <span class="toc-text">Mutation响应规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutation常量类型-–概念"><span class="toc-number">6.1.4.</span> <span class="toc-text">Mutation常量类型 –概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutation同步函数"><span class="toc-number">6.1.5.</span> <span class="toc-text">Mutation同步函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Action"><span class="toc-number">7.</span> <span class="toc-text">Action</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Action的基本定义"><span class="toc-number">7.1.</span> <span class="toc-text">Action的基本定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Action返回的Promise"><span class="toc-number">7.1.1.</span> <span class="toc-text">Action返回的Promise</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Module"><span class="toc-number">8.</span> <span class="toc-text">Module</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#认识Module"><span class="toc-number">8.0.1.</span> <span class="toc-text">认识Module</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(http://cdn.panyucable.cn/zysheep/vue-newsletter-logo.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">三月三</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bug" aria-hidden="true"></i><span> 编程路线</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/java/"><i class="fa-fw fa fa-coffee"></i><span> Java</span></a></li><li><a class="site-page" href="/python/"><i class="fa-fw fa fa-binoculars"></i><span> Python</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 面试宝典</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/interview/"><i class="fa-fw fa fa-file-text-o"></i><span> Java面试题</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 我的生活</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-picture-o"></i><span> Gallery</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Vuex详解</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-03-08 06:30:45"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-03-08</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-29 17:50:40"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-29</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/Vue-js/">Vue.js</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">3.8k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 12 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/03/08/Vue/Vuex%E8%AF%A6%E8%A7%A3/#post-comment"><span class="gitalk-comment-count comment-count"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="认识Vuex"><a href="#认识Vuex" class="headerlink" title="认识Vuex"></a>认识Vuex</h1><h2 id="Vuex是做什么的"><a href="#Vuex是做什么的" class="headerlink" title="Vuex是做什么的?"></a>Vuex是做什么的?</h2><p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用 集中式存储管理 应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。Vuex 也集成到 Vue 的官方调试工具 <code>devtools extension</code>，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。</p>
<p><strong>状态管理到底是什么？</strong></p>
<p>状态管理模式、集中式存储管理这些名词听起来就非常高大上，让人捉摸不透。其实，你可以简单的将其看成把需要多个组件共享的变量全部存储在一个对象里面。然后，将这个对象放在顶层的Vue实例中，让其他组件可以使用。那么，多个组件是不是就可以共享这个对象中的所有变量属性</p>
<blockquote>
<p>如果是这样的话，为什么官方还要专门出一个插件Vuex呢？难道我们不能自己封装一个对象来管理吗？</p>
</blockquote>
<p>当然可以，只是我们要先想想<code>VueJS</code>带给我们最大的便利是什么呢？没错，就是响应式。如果你自己封装实现一个对象能不能保证它里面所有的属性做到响应式呢？当然也可以，只是自己封装可能稍微麻烦一些。不用怀疑，<code>Vuex</code>就是为了提供这样一个在多个组件间共享状态的插件，用它就可以了。</p>
<h2 id="管理什么状态呢"><a href="#管理什么状态呢" class="headerlink" title="管理什么状态呢?"></a>管理什么状态呢?</h2><p>但是，有什么状态时需要我们在多个组件间共享的呢？</p>
<p>如果你做过大型开放，你一定遇到过多个状态，在多个界面间的共享问题。比如用户的登录状态、用户名称、头像、地理位置信息等等。比如商品的收藏、购物车中的物品等等。这些状态信息，我们都可以放在统一的地方，对它进行保存和管理，而且它们还是响应式的</p>
<h2 id="单界面的状态管理"><a href="#单界面的状态管理" class="headerlink" title="单界面的状态管理"></a>单界面的状态管理</h2><p>我们知道，要在单个组件中进行状态管理是一件非常简单的事情</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616101337.png" alt=""></p>
<ul>
<li>State：不用多说，就是我们的状态。（你姑且可以当做就是data中的属性）</li>
<li>View：视图层，可以针对State的变化，显示不同的信息。（这个好理解吧？）</li>
<li>Actions：这里的Actions主要是用户的各种操作：点击、输入等等，会导致状态的改变。</li>
</ul>
<h2 id="单界面状态管理的实现"><a href="#单界面状态管理的实现" class="headerlink" title="单界面状态管理的实现"></a>单界面状态管理的实现</h2><p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616102412.png" alt=""></p>
<p>在这个案例中，我们有没有状态需要管理呢？没错，就是个数<code>counter</code>。</p>
<ul>
<li><p>counter需要某种方式被记录下来，也就是我们的<code>State</code>。</p>
</li>
<li><p>counter目前的值需要被显示在界面中，也就是我们的<code>View</code>部分。</p>
</li>
<li><p>界面发生某些操作时（我们这里是用户的点击，也可以是用户的input），需要去更新状态，也就是我们的<code>Actions</code></p>
</li>
</ul>
<h2 id="多界面状态管理"><a href="#多界面状态管理" class="headerlink" title="多界面状态管理"></a>多界面状态管理</h2><blockquote>
<p>Vue已经帮我们做好了单个界面的状态管理，但是如果是多个界面呢？</p>
</blockquote>
<p>多个试图都依赖同一个状态（一个状态改了，多个界面需要进行更新）不同界面的Actions都想修改同一个状态（Home.vue需要修改，Profile.vue也需要修改这个状态）,也就是说对于某些状态(状态1/状态2/状态3)来说只属于我们某一个view，但是也有一些状态(状态a/状态b/状态c)属于多个试图共同想要维护的状态1/状态2/状态3你放在自己的房间中，你自己管理自己用，没问题。但是状态a/状态b/状态c我们希望交给一个大管家来统一帮助我们管理！！！没错，Vuex就是为我们提供这个大管家的工具。</p>
<p><strong>全局单例模式（大管家）</strong></p>
<p>我们现在要做的就是将共享的状态抽取出来，交给我们的大管家，统一进行管理。之后，你们每个试图，按照我规定好的规定，进行访问和修改等操作。这就是Vuex背后的基本思想。</p>
<p><strong>Vuex状态管理图例</strong></p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616102904.png" alt=""></p>
<h1 id="Vuex基本使用"><a href="#Vuex基本使用" class="headerlink" title="Vuex基本使用"></a>Vuex基本使用</h1><h2 id="安装使用Vuex"><a href="#安装使用Vuex" class="headerlink" title="安装使用Vuex"></a>安装使用Vuex</h2><blockquote>
<p>安装Vuex步骤</p>
</blockquote>
<ol>
<li><p>安装Vuex</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install vuex --save # 运行时依赖</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="简单的案例"><a href="#简单的案例" class="headerlink" title="简单的案例"></a>简单的案例</h2><p>1)首先，我们需要在某个地方存放我们的Vuex代码：这里，我们先创建一个文件夹store，并且在其中创建一个index.js文件。在index.js文件中写入如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import Vuex from &#39;vuex&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 1. 安装插件 vue的底层会执行 Vue.install</span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2. 创建对象</span><br><span class="line">const store &#x3D; new Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        counter: 1000</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations:&#123;</span><br><span class="line">        increment(state)&#123;</span><br><span class="line">            state.counter++</span><br><span class="line">        &#125;,</span><br><span class="line">        decrement(state)&#123;</span><br><span class="line">            state.counter--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    getters:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    modules:&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3. 导出store对象</span><br><span class="line">export  default store</span><br></pre></td></tr></table></figure>

<p>2)其次，我们让所有的<code>Vue</code>组件都可以使用这个<code>store</code>对象,来到main.js文件，导入store对象，并且放在new Vue中,这样，在其他Vue组件中，我们就可以通过<code>this.$store</code>的方式，获取到这个<code>store</code>对象了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import router from &quot;.&#x2F;router&quot;;</span><br><span class="line">import store  from &quot;.&#x2F;store&quot;;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip &#x3D; false</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;为什么需要挂载  store  Vue会修改原型,为所有组件添加一个全局的对象</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  render: h &#x3D;&gt; h(App),</span><br><span class="line">  router,</span><br><span class="line">  store</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

<p>3)使用Vuex的count</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        直接获取:&lt;p&gt;当前计数&#123;&#123;$store.state.counter&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">        js代码改变获取:&lt;p&gt;&#123;&#123;counter&#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;increment&quot;&gt;+1&lt;&#x2F;button&gt;</span><br><span class="line">        &lt;button @click&#x3D;&quot;decrement&quot;&gt;-1&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;HelloWorld&quot;,</span><br><span class="line">       computed:&#123;</span><br><span class="line">            counter()&#123;</span><br><span class="line">                return this.$store.state.counter</span><br><span class="line">            &#125;</span><br><span class="line">       &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">            increment()&#123;</span><br><span class="line">                this.$store.commit(&#39;increment&#39;)</span><br><span class="line">            &#125;,</span><br><span class="line">            decrement()&#123;</span><br><span class="line">                this.$store.commit(&#39;decrement&#39;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>我们来对使用步骤，做一个简单的小节：</p>
<ol>
<li>提取出一个公共的store对象，用于保存在多个组件中共享的状态</li>
<li>将store对象放置在new Vue对象中，这样可以保证在所有的组件中都可以使用到</li>
<li>在其他组件中使用store对象中保存的状态即可<ul>
<li>通过this.$store.state.属性的方式来访问状态</li>
<li>通过this.$store.commit(‘mutation中方法’)来修改状态</li>
</ul>
</li>
</ol>
<p><strong>注意事项：</strong></p>
<blockquote>
<p>我们通过提交mutation的方式，而非直接改变store.state.count。这是因为Vuex可以更明确的追踪状态的变化，所以不要直接改变store.state.count的值。</p>
</blockquote>
<h1 id="Vuex核心概念"><a href="#Vuex核心概念" class="headerlink" title="Vuex核心概念"></a>Vuex核心概念</h1><h1 id="State"><a href="#State" class="headerlink" title="State"></a>State</h1><h2 id="State单一状态树"><a href="#State单一状态树" class="headerlink" title="State单一状态树"></a>State单一状态树</h2><p>Vuex提出使用单一状态树, 什么是单一状态树呢？</p>
<p>英文名称是Single Source of Truth，也可以翻译成单一数据源。但是，它是什么呢？我们来看一个生活中的例子。</p>
<p>我们知道，在国内我们有很多的信息需要被记录，比如上学时的个人档案，工作后的社保记录，公积金记录，结婚后的婚姻信息，以及其他相关的户口、医疗、文凭、房产记录等等（还有很多信息）。这些信息被分散在很多地方进行管理，有一天你需要办某个业务时(比如入户某个城市)，你会发现你需要到各个对应的工作地点去打印、盖章各种资料信息，最后到一个地方提交证明你的信息无误。这种保存信息的方案，不仅仅低效，而且不方便管理，以及日后的维护也是一个庞大的工作(需要大量的各个部门的人力来维护，当然国家目前已经在完善我们的这个系统了)。</p>
<p>这个和我们在应用开发中比较类似：</p>
<p>如果你的状态信息是保存到多个Store对象中的，那么之后的管理和维护等等都会变得特别困难。所以Vuex也使用了单一状态树来管理应用层级的全部状态。单一状态树能够让我们最直接的方式找到某个状态的片段，而且在之后的维护和调试过程中，也可以非常方便的管理和维护</p>
<h1 id="Getters"><a href="#Getters" class="headerlink" title="Getters"></a>Getters</h1><h2 id="Getters基本使用"><a href="#Getters基本使用" class="headerlink" title="Getters基本使用"></a>Getters基本使用</h2><p>有时候，我们需要从<code>store</code>中获取一些state变异后的状态，和计数属性类似。比如下面的Store中：</p>
<p>获取学生年龄大于20的个数。</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616111331.png" alt=""></p>
<p>我们可以在<code>computed</code>中定义反回处理后的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed:&#123;</span><br><span class="line">    counter()&#123;</span><br><span class="line">        return this.$store.state.students.filter(age &#x3D;&gt; age&gt;&#x3D;20)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>或者在Store中定义getters</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getters:&#123;</span><br><span class="line">    greaterAgeStu(state)&#123;</span><br><span class="line">    	return state.students.filter(s &#x3D;&gt; s.age&gt;&#x3D;20)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="Getters作为参数和传递参数"><a href="#Getters作为参数和传递参数" class="headerlink" title="Getters作为参数和传递参数"></a>Getters作为参数和传递参数</h2><p>如果我们已经有了一个获取所有年龄大于20岁学生列表的长度, 那么代码可以这样来写,把getters作为参数传递个下一函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">getters:&#123;</span><br><span class="line">      greaterAgeStu(state)&#123;</span><br><span class="line">          return state.students.filter(s &#x3D;&gt; s.age&gt;&#x3D;20)</span><br><span class="line">      &#125;,</span><br><span class="line">      greaterAgeStuCount(state,getters)&#123;</span><br><span class="line">          return getters.greaterAgeStu.length</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p><code>getters</code>默认是不能传递参数的, 如果希望传递参数, 那么只能让<code>getters</code>本身返回另一个函数.比如上面的案例中,我们希望根据<code>ID</code>获取用户的信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">stuById(state)&#123;</span><br><span class="line">    return function (id) &#123;</span><br><span class="line">    	return state.students.find(s&#x3D;&gt; s.id&#x3D;&#x3D;id)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">在组件中使用</span><br><span class="line">希望根据ID获取用户的信息</span><br><span class="line">&lt;span&gt;&#123;&#123;$store.getters.stuById(112)&#125;&#125;&lt;&#x2F;span&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h1><h2 id="Mutation状态更新"><a href="#Mutation状态更新" class="headerlink" title="Mutation状态更新"></a>Mutation状态更新</h2><p><code>Vuex</code>的store状态的更新唯一方式：<strong>提交Mutation</strong></p>
<p>Mutation主要包括两部分：</p>
<ul>
<li>字符串的事件类型（type）</li>
<li>一个回调函数（handler）,该回调函数的第一个参数就是state。</li>
</ul>
<p><code>mutation</code>的定义方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mutations:&#123;</span><br><span class="line">       increment(state)&#123;</span><br><span class="line">           state.counter++</span><br><span class="line">       &#125;,</span><br><span class="line">       decrement(state)&#123;</span><br><span class="line">           state.counter--</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>

<p>组件通过<code>mutation</code>更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">         increment()&#123;</span><br><span class="line">             this.$store.commit(&#39;increment&#39;)</span><br><span class="line">         &#125;,</span><br><span class="line">         decrement()&#123;</span><br><span class="line">             this.$store.commit(&#39;decrement&#39;)</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<h3 id="Mutation传递参数"><a href="#Mutation传递参数" class="headerlink" title="Mutation传递参数"></a>Mutation传递参数</h3><p>在通过<code>mutation</code>更新数据的时候, 有可能我们希望携带一些额外的参数。参数被称为是<code>mutation</code>的载荷(Payload)</p>
<p><code>Mutation</code>中的代码:</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616112737.png" alt=""></p>
<blockquote>
<p>但是如果参数不是一个呢?</p>
</blockquote>
<p>比如我们有很多参数需要传递.这个时候, 我们通常会以对象的形式传递, 也就是<code>payload</code>是一个对象.这个时候可以再从对象中取出相关的信息.</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616112830.png" alt=""></p>
<h3 id="Mutation提交风格"><a href="#Mutation提交风格" class="headerlink" title="Mutation提交风格"></a>Mutation提交风格</h3><p>上面的通过<code>commit</code>进行提交是一种普通的方式,Vue还提供了另外一种风格, 它是一个包含type属性的对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods:&#123;</span><br><span class="line">          increment()&#123;</span><br><span class="line">              this.$store.commit(&#123;</span><br><span class="line">                 type: &#39;increment&#39;,</span><br><span class="line">                 count: 1000</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;                       </span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p><code>Mutation</code>中的处理方式是将整个<code>commit</code>的对象作为<code>payload</code>使用, 所以代码没有改变, 依然如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mutations:&#123;</span><br><span class="line">    increment(state,payload)&#123;</span><br><span class="line">        state.counter &#x3D; payload.count</span><br><span class="line">    &#125;      </span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="Mutation响应规则"><a href="#Mutation响应规则" class="headerlink" title="Mutation响应规则"></a>Mutation响应规则</h3><p><code>Vuex</code>的store中的state是响应式的, 当state中的数据发生改变时, Vue组件会自动更新.</p>
<p>这就要求我们必须遵守一些Vuex对应的规则:</p>
<ol>
<li>提前在store中初始化好所需的属性.</li>
<li>当给state中的对象添加新属性时, 使用下面的方式:<ul>
<li>方式一: 使用Vue.set(obj, ‘newProp’, 123)</li>
<li>方式二: 用新对象给旧对象重新赋值</li>
</ul>
</li>
<li>删除state中的对象<code>Vue.delete(对象,属性)</code></li>
</ol>
<p>例如:</p>
<p>新建<code>userinfo</code>组件,编写按钮改变信息,在状态管理中直接改变<code>info</code>对象</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616115757.png" alt=""></p>
<h3 id="Mutation常量类型-–概念"><a href="#Mutation常量类型-–概念" class="headerlink" title="Mutation常量类型 –概念"></a>Mutation常量类型 –概念</h3><blockquote>
<p>我们来考虑下面的问题:</p>
</blockquote>
<p>在<code>mutation</code>中, 我们定义了很多事件类型(也就是其中的方法名称).当我们的项目增大时, Vuex管理的状态越来越多, 需要更新状态的情况越来越多, 那么意味着Mutation中的方法越来越多</p>
<p>方法过多, 使用者需要花费大量的经历去记住这些方法, 甚至是多个文件间来回切换, 查看方法名称, 甚至如果不是复制的时候, 可能还会出现写错的情况.</p>
<blockquote>
<p>如何避免上述的问题呢?</p>
</blockquote>
<p>在各种Flux实现中, 一种很常见的方案就是使用常量替代Mutation事件的类型.我们可以将这些常量放在一个单独的文件中, 方便管理以及让整个app所有的事件类型一目了然.</p>
<blockquote>
<p>具体怎么做呢?</p>
</blockquote>
<p>我们可以创建一个文件: <code>mutation-types.js</code>, 并且在其中定义我们的常量.定义常量时, 我们可以使用ES2015中的风格, 使用一个常量来作为函数的名称.</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616135900.png" alt=""></p>
<h3 id="Mutation同步函数"><a href="#Mutation同步函数" class="headerlink" title="Mutation同步函数"></a>Mutation同步函数</h3><p>通常情况下, <code>Vuex</code>要求我们<code>Mutation</code>中的方法必须是同步方法.</p>
<p>主要的原因是当我们使用<code>devtools</code>时, 可以<code>devtools</code>可以帮助我们捕捉<code>mutation</code>的快照.但是如果是异步操作, 那么<code>devtools</code>将不能很好的追踪这个操作什么时候会被完成.</p>
<p>比如我们之前的代码, 当执行更新时, devtools中会有如下信息:</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616141536.png" alt="">)<img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616141558.png" alt=""></p>
<p>但是, 如果Vuex中的代码, 我们使用了异步函数: 图2</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616144206.png" alt=""></p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616144307.png" alt=""></p>
<p>你会发现state中的info数据一直没有被改变, 因为他无法追踪到</p>
<blockquote>
<p>So, 通常情况下, 不要再<code>mutation</code>中进行异步的操作</p>
</blockquote>
<h1 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h1><h2 id="Action的基本定义"><a href="#Action的基本定义" class="headerlink" title="Action的基本定义"></a>Action的基本定义</h2><p>我们强调, 不要再<code>Mutation</code>中进行异步操作.但是某些情况, 我们确实希望在Vuex中进行一些异步操作, 比如网络请求, 必然是异步的. 这个时候怎么处理呢?</p>
<blockquote>
<p>Action类似于Mutation, 但是是用来代替Mutation进行异步操作的.</p>
</blockquote>
<p>Action的基本使用代码如下:</p>
<blockquote>
<p>context是什么?</p>
</blockquote>
<p>context是和store对象具有相同方法和属性的对象.也就是说, 我们可以通过context去进行commit相关的操作, 也可以获取context.state等.但是注意, 这里它们并不是同一个对象</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616144825.png" alt=""></p>
<p>在Vue组件中, 如果我们调用action中的方法, 那么就需要使用<code>dispatch</code>,同样的, 也是支持传递<code>payload</code></p>
<h3 id="Action返回的Promise"><a href="#Action返回的Promise" class="headerlink" title="Action返回的Promise"></a>Action返回的Promise</h3><p>ES6语法中<code>Promise</code>经常用于异步操作.在<code>Action</code>中, 我们可以将异步操作放在一个<code>Promise</code>中, 并且在成功或者失败后, 调用对应的<code>resolve</code>或<code>reject</code>.</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616145925.png" alt=""></p>
<h1 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h1><h3 id="认识Module"><a href="#认识Module" class="headerlink" title="认识Module"></a>认识Module</h3><p><code>Module</code>是模块的意思, 为什么在<code>Vuex</code>中我们要使用模块呢?</p>
<blockquote>
<p>Vue使用单一状态树,那么也意味着很多状态都会交给Vuex来管理.当应用变得非常复杂时,store对象就有可能变得相当臃肿.为了解决这个问题, Vuex允许我们将store分割成模块(Module), 而每个模块拥有自己的state、mutation、action、getters等</p>
</blockquote>
<p>我们按照什么样的方式来组织模块呢? </p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616152704.png" alt=""></p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616152725.png" alt=""></p>
<p>启动观察</p>
<p><img src="http://cdn.panyucable.cn/zysheep/QQ%E6%88%AA%E5%9B%BE20200616152802.png" alt=""></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">三月三</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zysheep.cn/2020/03/08/Vue/Vuex%E8%AF%A6%E8%A7%A3/">https://zysheep.cn/2020/03/08/Vue/Vuex详解/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zysheep.cn" target="_blank">三月三</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a><a class="post-meta__tags" href="/tags/js/">js</a></div><div class="post_share"><div class="social-share" data-image="http://cdn.panyucable.cn/zysheep/wallhaven-n673pw.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="https://cdn.jsdelivr.net/gh/zysheep/picgo-imgs/imgwechat.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="https://cdn.jsdelivr.net/gh/zysheep/picgo-imgs/imgalipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/03/08/Vue/Promise%E7%9A%84%E4%BD%BF%E7%94%A8/"><img class="prev_cover" src="http://cdn.panyucable.cn/zysheep/51-RuYqxNML.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Promise的使用</div></div></a></div><div class="next-post pull_right"><a href="/2020/03/08/Vue/%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9D%97%E5%B0%81%E8%A3%85axios/"><img class="next_cover" src="http://cdn.panyucable.cn/zysheep/vue-chimera.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">网络模块封装axios</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/03/08/Vue/Promise的使用/" title="Promise的使用"><img class="relatedPosts_cover" src="http://cdn.panyucable.cn/zysheep/51-RuYqxNML.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-08</div><div class="relatedPosts_title">Promise的使用</div></div></a></div><div class="relatedPosts_item"><a href="/2020/03/08/Vue/网络模块封装axios/" title="网络模块封装axios"><img class="relatedPosts_cover" src="http://cdn.panyucable.cn/zysheep/vue-chimera.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-08</div><div class="relatedPosts_title">网络模块封装axios</div></div></a></div><div class="relatedPosts_item"><a href="/2020/03/07/Vue/Vue-Cli/" title="Vue-Cli详解"><img class="relatedPosts_cover" src="http://cdn.panyucable.cn/zysheep/vueCli-cover.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-07</div><div class="relatedPosts_title">Vue-Cli详解</div></div></a></div><div class="relatedPosts_item"><a href="/2020/03/07/Vue/Vue-router详解/" title="Vue-router详解"><img class="relatedPosts_cover" src="http://cdn.panyucable.cn/zysheep/vue-router-cover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-07</div><div class="relatedPosts_title">Vue-router详解</div></div></a></div><div class="relatedPosts_item"><a href="/2020/03/06/Vue/webpack实践/" title="Webpack实践"><img class="relatedPosts_cover" src="http://cdn.panyucable.cn/zysheep/vue8.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-06</div><div class="relatedPosts_title">Webpack实践</div></div></a></div><div class="relatedPosts_item"><a href="/2020/03/05/Vue/Vue.js/" title="Vue.js入门宝典"><img class="relatedPosts_cover" src="http://cdn.panyucable.cn/zysheep/vue_cover_logo.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-05</div><div class="relatedPosts_title">Vue.js入门宝典</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '502b8308721b081071a5',
  clientSecret: '35220d15c7f8aaf585d6822cf5d49fedf5b602d6',
  repo: 'blog-comment',
  owner: 'zysheep',
  admin: ['zysheep'],
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN',
  perPage: 10,
  distractionFreeMode: false,
  pagerDirection: 'last',
  createIssueManually: false,
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  try {
    document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
  } catch (e) {
    return false
  }
}</script></div></article></main><footer id="footer" style="background-image: url(http://cdn.panyucable.cn/zysheep/vue-newsletter-logo.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 三月三</div><div class="footer_custom_text">生活不只是眼前的苟且,还有诗和远方</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/third-party/click_heart.js"></script><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/js/hideCategory.min.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script></body></html>