<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Webpack实践 | 三月三</title><meta name="description" content="webpack介绍和安装webpack介绍 为什么需要webpack由于前端之前js、css、图片文件需要单独进行压缩和打包，这样团队人员处理很繁琐，然后 Instagram 团队就想让这些工作自动化，然后webpack应运而生。 是什么webpack是一个模块打包器（module bundler），webpack视HTML，JS，CSS，图片等文件都是一种 资源 ，每个资源文件都是一个模块（mo"><meta name="keywords" content="Vue,js"><meta name="author" content="三月三"><meta name="copyright" content="三月三"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="dns-prefetch" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Webpack实践"><meta name="twitter:description" content="webpack介绍和安装webpack介绍 为什么需要webpack由于前端之前js、css、图片文件需要单独进行压缩和打包，这样团队人员处理很繁琐，然后 Instagram 团队就想让这些工作自动化，然后webpack应运而生。 是什么webpack是一个模块打包器（module bundler），webpack视HTML，JS，CSS，图片等文件都是一种 资源 ，每个资源文件都是一个模块（mo"><meta name="twitter:image" content="http://qanu3nz77.bkt.clouddn.com/zysheep/vue8.png"><meta property="og:type" content="article"><meta property="og:title" content="Webpack实践"><meta property="og:url" content="https://zysheep.cn/2020/03/06/Vue/webpack%E5%AE%9E%E8%B7%B5/"><meta property="og:site_name" content="三月三"><meta property="og:description" content="webpack介绍和安装webpack介绍 为什么需要webpack由于前端之前js、css、图片文件需要单独进行压缩和打包，这样团队人员处理很繁琐，然后 Instagram 团队就想让这些工作自动化，然后webpack应运而生。 是什么webpack是一个模块打包器（module bundler），webpack视HTML，JS，CSS，图片等文件都是一种 资源 ，每个资源文件都是一个模块（mo"><meta property="og:image" content="http://qanu3nz77.bkt.clouddn.com/zysheep/vue8.png"><meta property="article:published_time" content="2020-03-05T22:30:45.000Z"><meta property="article:modified_time" content="2020-06-12T09:48:29.857Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://zysheep.cn/2020/03/06/Vue/webpack%E5%AE%9E%E8%B7%B5/"><link rel="prev" title="Nginx的前世今生" href="https://zysheep.cn/2020/03/06/Nginx/Nginx%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/"><link rel="next" title="Linux为何如此有趣" href="https://zysheep.cn/2020/03/05/Linux/Linux%E4%B8%BA%E4%BD%95%E5%A6%82%E6%AD%A4%E6%9C%89%E8%B6%A3/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7f671f0f6d996680d21d5c32a23a9313";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://zysheep.github.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/hideCategory.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/zysheep/picgo-imgs/img41.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">190</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">42</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">63</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于三月三</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bug" aria-hidden="true"></i><span> 编程路线</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/java/"><i class="fa-fw fa fa-coffee"></i><span> Java</span></a></li><li><a class="site-page" href="/python/"><i class="fa-fw fa fa-binoculars"></i><span> Python</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 面试宝典</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/interview/"><i class="fa-fw fa fa-file-text-o"></i><span> Java面试题</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 我的生活</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-picture-o"></i><span> Gallery</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#webpack介绍和安装"><span class="toc-number">1.</span> <span class="toc-text">webpack介绍和安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack介绍"><span class="toc-number">1.1.</span> <span class="toc-text">webpack介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么需要webpack"><span class="toc-number">1.1.1.</span> <span class="toc-text">为什么需要webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#是什么"><span class="toc-number">1.1.2.</span> <span class="toc-text">是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#有什么用"><span class="toc-number">1.1.3.</span> <span class="toc-text">有什么用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack使用的名词"><span class="toc-number">1.1.4.</span> <span class="toc-text">webpack使用的名词</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack使用环境准备"><span class="toc-number">1.2.</span> <span class="toc-text">webpack使用环境准备</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#webpack配置使用"><span class="toc-number">2.</span> <span class="toc-text">webpack配置使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#测试环境"><span class="toc-number">2.1.</span> <span class="toc-text">测试环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#搭建项目结构"><span class="toc-number">2.2.</span> <span class="toc-text">搭建项目结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#index-html"><span class="toc-number">2.2.1.</span> <span class="toc-text">index.html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js"><span class="toc-number">2.2.2.</span> <span class="toc-text">js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack-config-js-配置文件"><span class="toc-number">2.2.3.</span> <span class="toc-text">webpack.config.js(配置文件)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#初始化项目"><span class="toc-number">2.3.</span> <span class="toc-text">初始化项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#当前项目安装Webpack依赖包"><span class="toc-number">2.4.</span> <span class="toc-text">当前项目安装Webpack依赖包</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#打包测试"><span class="toc-number">3.</span> <span class="toc-text">打包测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#实现CSS打包"><span class="toc-number">3.1.</span> <span class="toc-text">实现CSS打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现SCSS打包"><span class="toc-number">3.2.</span> <span class="toc-text">实现SCSS打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现Less打包"><span class="toc-number">3.3.</span> <span class="toc-text">实现Less打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现打包url资源（图片、gif、图标等）功能"><span class="toc-number">3.4.</span> <span class="toc-text">实现打包url资源（图片、gif、图标等）功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题"><span class="toc-number">3.4.1.</span> <span class="toc-text">问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack-dev-server结合后端服务器的热替换配置"><span class="toc-number">3.5.</span> <span class="toc-text">Webpack-dev-server结合后端服务器的热替换配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES6转换为ES5语法"><span class="toc-number">3.6.</span> <span class="toc-text">ES6转换为ES5语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#防止文件缓存（生成带有20位的hash值的唯一文件）"><span class="toc-number">3.7.</span> <span class="toc-text">防止文件缓存（生成带有20位的hash值的唯一文件）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#抽取CSS为单独文件"><span class="toc-number">3.8.</span> <span class="toc-text">抽取CSS为单独文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发环境和生产环境的分离"><span class="toc-number">3.9.</span> <span class="toc-text">开发环境和生产环境的分离</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在生产环境中配置代码压缩功能"><span class="toc-number">3.9.1.</span> <span class="toc-text">在生产环境中配置代码压缩功能</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(http://qanu3nz77.bkt.clouddn.com/zysheep/vue8.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">三月三</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于三月三</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bug" aria-hidden="true"></i><span> 编程路线</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/java/"><i class="fa-fw fa fa-coffee"></i><span> Java</span></a></li><li><a class="site-page" href="/python/"><i class="fa-fw fa fa-binoculars"></i><span> Python</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-folder-open" aria-hidden="true"></i><span> 面试宝典</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/interview/"><i class="fa-fw fa fa-file-text-o"></i><span> Java面试题</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 我的生活</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-picture-o"></i><span> Gallery</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Webpack实践</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-03-06 06:30:45"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-03-06</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-12 17:48:29"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-12</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fa fa-angle-right post-meta__separator" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/Webpack/">Webpack</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">8.1k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 33 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/03/06/Vue/webpack%E5%AE%9E%E8%B7%B5/#post-comment"><span class="gitalk-comment-count comment-count"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="webpack介绍和安装"><a href="#webpack介绍和安装" class="headerlink" title="webpack介绍和安装"></a>webpack介绍和安装</h1><h2 id="webpack介绍"><a href="#webpack介绍" class="headerlink" title="webpack介绍"></a>webpack介绍</h2><p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/vue8.png" alt=""></p>
<h3 id="为什么需要webpack"><a href="#为什么需要webpack" class="headerlink" title="为什么需要webpack"></a>为什么需要webpack</h3><p>由于前端之前js、css、图片文件需要单独进行压缩和打包，这样团队人员处理很繁琐，然后 Instagram 团队就想让这些工作自动化，然后webpack应运而生。</p>
<h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p>webpack是一个模块打包器（module bundler），webpack视HTML，JS，CSS，图片等文件都是一种 <strong>资源</strong> ，每个资源文件都是一个模块（module）文件，webpack就是根据每个模块文件之间的依赖关系将所有的模块打包（bundle）起来。</p>
<h3 id="有什么用"><a href="#有什么用" class="headerlink" title="有什么用"></a>有什么用</h3><ul>
<li>对 CommonJS 、 AMD 、ES6的语法做了兼容</li>
<li>对js、css、图片等资源文件都支持打包（适合团队化开发）</li>
<li>比方你写一个js文件，另外一个人也写一个js文件，需要合并很麻烦，现在交给webpack合并很简单</li>
<li>有独立的配置文件<code>webpack.config.js</code></li>
<li>可以将代码切割成不同的chunk，实现按需加载，降低了初始化时间</li>
<li>具有强大的Plugin（插件）接口，大多是内部插件，使用起来比较灵活</li>
</ul>
<h3 id="webpack使用的名词"><a href="#webpack使用的名词" class="headerlink" title="webpack使用的名词"></a>webpack使用的名词</h3><blockquote>
<p>webpack的核心概念分为 <code>入口(Entry)</code>、<code>加载器(Loader)</code>、<code>插件(Plugins)</code>、<code>出口(Output)</code></p>
</blockquote>
<p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/QQ%E6%88%AA%E5%9B%BE20200612151925.png" alt=""></p>
<ul>
<li><em><code>入口(Entry)</code>：入口起点</em>告诉 webpack <em>从哪里开始</em>，并根据依赖关系图确定<strong>需要打包的文件内容</strong></li>
<li><code>加载器(Loader)</code>：webpack 将所有的资源（css, js, image 等）都看做模块，但是 webpack 能处理的只是 JavaScript，因此，需要存在一个能将其他资源转换为模块，让 webpack 能将其加入依赖树中的东西，它就是 loader。loader用于对模块的源代码进行转换。loader 可以使你在 import 或”加载”模块时<strong>预处理文件</strong>。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。如<code>less-loader</code>,<code>css-loader</code>,<code>sass-loader</code>,<code>url-loader</code>,<code>file-loader</code></li>
<li><code>插件(Plugins)</code>：loader 只能针对某种特定类型的文件进行处理，而 plugin 的功能则更为强大。在 plugin 中能够介入到整个 webpack 编译的生命周期，Plugins用于解决 loader 无法实现的其他事情，也就是说loader是预处理文件，那plugin 就是后处理文件。如:<strong>代码压缩从而减小文件体积</strong>,<strong>热更新（浏览器实时显示）</strong></li>
<li><code>出口(Output)</code>:指定打包后文件的路径目录和文件名</li>
</ul>
<h2 id="webpack使用环境准备"><a href="#webpack使用环境准备" class="headerlink" title="webpack使用环境准备"></a>webpack使用环境准备</h2><p>###安装Node.js</p>
<p><code>webpack</code>基于<code>node.js</code>运行，首先需要安装<code>node.js</code></p>
<p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/QQ%E6%88%AA%E5%9B%BE20200611165721.png" alt=""></p>
<blockquote>
<p>为什么会有node.js？ </p>
</blockquote>
<p>传统意义上的 JavaScript 运行在浏览器上，Chrome 使用的 JavaScript 引擎是 V8，Node.js 是一个运行在服务端的框架，它的底层就使用了 V8 引擎，这样就可以使用javascript去编写一些服务端的程序，这样也就实现了用 javaScript去开发 Apache + PHP 以及 Java Servlet所开发的服务端功能，这样做的好处就是前端和后端都采用 javascript，即开发一份js程序即可以运行在前端也可以运行的服务端，这样比一个应用使用多种语言在开发效率上 要高，不过node.js属于新兴产品，一些公司也在尝试使用node.js完成一些业务领域，node.js基于V8引擎，基于事件驱动机制，在特定领域性能出色，比如用node.js实现消息推送、状态监控等的业务功能非常合适。</p>
<ol>
<li><p>下载对应你系统的Node.js版本: <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a> 推荐下载LTS版本</p>
</li>
<li><p>选安装目录进行安装,默认即可,安装完成检查PATH环境变量是否设置了node.js的路径。 </p>
</li>
<li><p>在命令提示符下输入命令 <code>node -v</code>测试,会显示当前node的版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\L15096000421&gt;node -v</span><br><span class="line">v12.13.0</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>###安装NPM </p>
<p><strong>1、自动安装NPM</strong></p>
<p>npm全称<code>Node Package Manager</code>，他是node包管理和分发的工具，使用NPM可以对应用的依赖进行管理，NPM的功能和服务端项目构建工具maven差不多，我们通过npm 可以很方便地下载<code>js</code>库，打包<code>js</code>文件。 <code>node.js</code>已经集成了<code>npm</code>工具，在命令提示符输入 npm -v 可查看当前npm版本 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\L15096000421&gt;npm -v</span><br><span class="line">6.13.2</span><br></pre></td></tr></table></figure>

<p>*<em>2、设置包路径 *</em></p>
<p>包路径就是<code>npm</code>从远程下载的<code>js</code>包所存放的路径;</p>
<p>使用<code>npm confifig ls</code> 查询NPM管理包路径（NPM下载的依赖包所存放的路径）  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm@6.13.2 C:\Users\L15096000421\AppData\Roaming\npm\node_modules\npm</span><br></pre></td></tr></table></figure>

<p>NPM默认的管理包路径在C:/用户/[用户名]/AppData/Roming/npm/node_meodules，为了方便对依赖包管理，我们可以将管理包的路径设置在单独的地方，本教程将安装目录设置在node.js的目录下，创建<code>npm_modules</code>和 <code>npm_cache</code>，执行下边的命令： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm confifig set prefifix &quot;C:\Program Files\nodejs\npm_modules&quot; </span><br><span class="line">npm confifig set cache &quot;c:\Program Files\nodejs\npm_cache&quot;</span><br></pre></td></tr></table></figure>

<p>此时再使用 npm confifig ls 查询NPM管理包路径发现路径已更改</p>
<p><strong>3、安装cnpm</strong> </p>
<p>npm默认会去国外的镜像去下载js包，在开发中通常我们使用国内镜像，这里使用淘宝镜像;</p>
<p>输入命令，进行全局安装淘宝镜像。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>安装后，我们可以使用<code>cnpm -v</code>命令来查看cnpm的版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\L15096000421&gt;cnpm -v</span><br><span class="line">cnpm@6.1.1 (C:\Users\L15096000421\AppData\Roaming\npm\node_modules\cnpm\lib\parse_argv.js)</span><br><span class="line">npm@6.14.5 (C:\Users\L15096000421\AppData\Roaming\npm\node_modules\cnpm\node_modules\npm\lib\npm.js)</span><br><span class="line">node@12.13.0 (D:\kaifagongju\node\node install\node.exe)</span><br><span class="line">npminstall@3.27.0 (C:\Users\L15096000421\AppData\Roaming\npm\node_modules\cnpm\node_modules\npminstall\lib\index.js)</span><br><span class="line">prefix&#x3D;C:\Users\L15096000421\AppData\Roaming\npm</span><br><span class="line">win32 x64 10.0.18362</span><br><span class="line">registry&#x3D;https:&#x2F;&#x2F;r.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p><code>nrm ls</code> 查看镜像是否已经指向taobao</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\L15096000421&gt;nrm ls</span><br><span class="line"></span><br><span class="line">* npm -------- https:&#x2F;&#x2F;registry.npmjs.org&#x2F;</span><br><span class="line">  yarn ------- https:&#x2F;&#x2F;registry.yarnpkg.com&#x2F;</span><br><span class="line">  cnpm ------- http:&#x2F;&#x2F;r.cnpmjs.org&#x2F;</span><br><span class="line">  taobao ----- https:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;</span><br><span class="line">  nj --------- https:&#x2F;&#x2F;registry.nodejitsu.com&#x2F;</span><br><span class="line">  npmMirror -- https:&#x2F;&#x2F;skimdb.npmjs.com&#x2F;registry&#x2F;</span><br><span class="line">  edunpm ----- http:&#x2F;&#x2F;registry.enpmjs.org&#x2F;</span><br></pre></td></tr></table></figure>

<p>使<code>nrm use XXX</code>切换镜像</p>
<blockquote>
<p>如果nrm没有安装则需要进行全局安装：cnpm install -g nrm </p>
</blockquote>
<p>###安装webpack</p>
<p><code>webpack</code>安装分为本地安装和全局安装：</p>
<p><strong>本地安装:</strong>仅将webpack安装在当前项目的<code>node_modules</code>目录中，仅对当前项目有效。 </p>
<p><strong>全局安装:</strong>将webpack安装在本机，对所有项目有效，全局安装会锁定一个<code>webpack</code>版本，该版本可能不适用某个 项目。全局安装需要添加 <code>-g</code>参数</p>
<p>1、本地安装</p>
<p>只在我的项目中使用webpack，需要进行本地安装，因为项目和项目所用的webpack的版本不一样。本地安装就会 将webpack的js包下载到项目下的<code>npm_modeuls</code>目录下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack 或 cnpm install --save-dev webpack</span><br><span class="line">npm install --save-dev webpack-cli (4.0以后的版本需要安装webpack-cli)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>--save-dev</code>可以使用<code>-D</code>参数代替 </p>
<p><code>--save</code> ：将配置信息保存到package.json中，同时 <code>--save</code> ：也是项目生产环境，项目发布之后还依赖的东西，保存在dependencies</p>
<p>例如：如果你用了 jQuery，由于发布之后还是依赖<code>jQuery</code>，所以是<code>dependencies</code></p>
<p><code>--save-dev</code> ：是项目开发环境依赖的东西，保存在devDependencies中</p>
<p>例如：写 ES6 代码，如果你想编译成 <code>ES5</code> 发布那么 <code>babel</code> 就是<code>devDependencies</code></p>
</blockquote>
<p>2、全局安装加<code>-g</code></p>
<p>全局安装就将<code>webpack</code>的<code>js</code>包下载到<code>npm</code>的包路径下。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack -g 或 cnpm install webpack -g</span><br></pre></td></tr></table></figure>

<p>3、安装webpack指定的版本,不指定代表安装最新的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">本地安装: cnpm install --save-dev webpack@3.6.0</span><br><span class="line">全局安装：npm install webpack@3.6.0 -g或 cnpm install webpack@3.6.0 -g</span><br></pre></td></tr></table></figure>

<p>4、测试:在cmd状态输入<code>webpack -v</code>，出现如下提示说明 webpack安装成功 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">E:\webpacktest&gt;webpack -v</span><br><span class="line">4.43.0</span><br></pre></td></tr></table></figure>

<h1 id="webpack配置使用"><a href="#webpack配置使用" class="headerlink" title="webpack配置使用"></a>webpack配置使用</h1><h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><ul>
<li>WebStorm 2020.1.2 x64</li>
<li>node —  v12.13.0</li>
<li>webpack —  4.43.0</li>
<li>npm — 6.13.2</li>
</ul>
<h2 id="搭建项目结构"><a href="#搭建项目结构" class="headerlink" title="搭建项目结构"></a>搭建项目结构</h2><p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/QQ%E6%88%AA%E5%9B%BE20200612154107.png" alt=""></p>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;first&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;button&quot; id&#x3D;&quot;btn&quot; value&#x3D;&quot;+&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;two&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;button&quot; id&#x3D;&quot;btn&quot; value&#x3D;&quot;&#x3D;&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;res&quot;&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;.&#x2F;dist&#x2F;js&#x2F;bulid.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><p>moudle1.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function sum(x,y)&#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 导出 sum 函数</span><br><span class="line">module.exports &#x3D; sum;</span><br></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1、获取index.html中的dom对象</span><br><span class="line"></span><br><span class="line">var first &#x3D; document.getElementById(&#39;first&#39;);</span><br><span class="line">var btn &#x3D; document.getElementById(&#39;btn&#39;);</span><br><span class="line">var two &#x3D; document.getElementById(&#39;two&#39;);</span><br><span class="line">var res &#x3D; document.getElementById(&#39;res&#39;);</span><br><span class="line">	btn.onclick &#x3D; function()&#123;</span><br><span class="line">		var firstValue &#x3D; parseFloat(first.value);</span><br><span class="line">		var twoValue &#x3D; parseFloat(two.value);</span><br><span class="line">		&#x2F;&#x2F;2、获取 module1.js中的 sum函数</span><br><span class="line">		&#x2F;&#x2F;http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;2015&#x2F;05&#x2F;require.html</span><br><span class="line">		var sum &#x3D; require(&#39;.&#x2F;module1.js&#39;);</span><br><span class="line">		res.value &#x3D; sum(firstValue,twoValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="webpack-config-js-配置文件"><a href="#webpack-config-js-配置文件" class="headerlink" title="webpack.config.js(配置文件)"></a>webpack.config.js(配置文件)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const path &#x3D; require(&#39;path&#39;);  &#x2F;&#x2F; 首先要引入node.js中path 模块，用于处理文件与目录的路径</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; const 命令声明一个只读的常量，一旦声明，值不可以改变，改变会报错；只声明不赋值也会报错</span><br><span class="line">&#x2F;&#x2F; 常量存储的是一个不可以变化的变量。</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">    entry:&#39;.&#x2F;src&#x2F;.&#x2F;js&#x2F;main.js&#39;, &#x2F;&#x2F; 指定入口文件</span><br><span class="line">    output:&#123;</span><br><span class="line">        path: path.resolve(__dirname, &#39;.&#x2F;dist&#39;), &#x2F;&#x2F; 指定出口文件的路径目录</span><br><span class="line">        filename: &#39;bulid.js&#39; &#x2F;&#x2F; 制定出口文件的名称</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><p>进入到根目录<code>webpacktest</code>,使用 <code>cnpm init</code>指令创建项目描述文件 <code>package.json</code>文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm init</span><br></pre></td></tr></table></figure>

<p>命令行里会以交互的形式让你填一些项目的介绍信息，依次介绍如下：（不知道怎么填的直接回车、回车…）</p>
<ul>
<li>name 项目名称,不填则默认更目录</li>
<li>version 项目的版本号,不填则默认1.0.0</li>
<li>description 项目的描述信息</li>
<li>entry point 项目的入口文件,不填则默认index.js,后面可以修改</li>
<li>test command 项目启动时脚本命令</li>
<li>git repository 如果你有 Git 地址，可以将这个项目放到你的 Git 仓库里</li>
<li>keywords 关键词</li>
<li>author 作者叫啥</li>
<li>license 项目要发行的时候需要的证书，平时玩玩忽略它</li>
</ul>
<p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/QQ%E6%88%AA%E5%9B%BE20200612155532.png" alt=""></p>
<p>###测试</p>
<p>根目录<code>webpacktest</code>新建<code>app.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#39;我很帅&#39;)</span><br></pre></td></tr></table></figure>

<p>执行命令<code>node  app.js</code></p>
<p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/QQ%E6%88%AA%E5%9B%BE20200612155905.png" alt=""></p>
<blockquote>
<p>证明了node是提供了JavaScript的运行环境</p>
</blockquote>
<h2 id="当前项目安装Webpack依赖包"><a href="#当前项目安装Webpack依赖包" class="headerlink" title="当前项目安装Webpack依赖包"></a>当前项目安装Webpack依赖包</h2><p>只在我的项目中使用webpack，需要进行本地安装，因为项目和项目所用的webpack的版本不一样。本地安装就会 将webpack的js包下载到项目下的<code>npm_modeuls</code>目录下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev webpack</span><br><span class="line">cnpm install --save-dev webpack-cli (4.0以后的版本需要安装webpack-cli)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>--save-dev</code>可以使用<code>-D</code>参数代替 </p>
<p><code>--save</code> ：将配置信息保存到package.json中，同时 <code>--save</code> ：也是项目生产环境，项目发布之后还依赖的东西，保存在dependencies</p>
<p>例如：如果你用了 jQuery，由于发布之后还是依赖<code>jQuery</code>，所以是<code>dependencies</code></p>
<p><code>--save-dev</code> ：是项目开发环境依赖的东西，保存在devDependencies中</p>
<p>例如：写 ES6 代码，如果你想编译成 <code>ES5</code> 发布那么 <code>babel</code> 就是<code>devDependencies</code></p>
</blockquote>
<h1 id="打包测试"><a href="#打包测试" class="headerlink" title="打包测试"></a>打包测试</h1><h2 id="实现CSS打包"><a href="#实现CSS打包" class="headerlink" title="实现CSS打包"></a>实现CSS打包</h2><ol>
<li>本地安装所需的加载器</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install css-loader style-loader --save-dev</span><br></pre></td></tr></table></figure>

<p>2.在src—&gt;css目录中新建main.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#first&#123;</span><br><span class="line">    border: 1px solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.在webpack.config.js中配置相关的loader</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const path &#x3D; require(&#39;path&#39;);  &#x2F;&#x2F; 首先要引入node.js中path 模块，用于处理文件与目录的路径</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; const 命令声明一个只读的常量，一旦声明，值不可以改变，改变会报错；只声明不赋值也会报错</span><br><span class="line">&#x2F;&#x2F; 常量存储的是一个不可以变化的变量。</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">    entry:&#39;.&#x2F;src&#x2F;.&#x2F;js&#x2F;main.js&#39;, &#x2F;&#x2F; 指定入口文件</span><br><span class="line">    output:&#123;</span><br><span class="line">        path: path.resolve(__dirname, &#39;.&#x2F;dist&#x2F;js&#39;), &#x2F;&#x2F; 指定出口文件的路径目录</span><br><span class="line">        filename: &#39;bulid.js&#39; &#x2F;&#x2F; 制定出口文件的名称</span><br><span class="line">    &#125;,</span><br><span class="line">    module:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">        &#x2F;&#x2F; 在webpack2中，loaders 被替换成了 rules 其实就是loader的规则</span><br><span class="line">            &#123;</span><br><span class="line">                test: &#x2F;\.css$&#x2F;,</span><br><span class="line">                use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ]</span><br><span class="line">                &#x2F;&#x2F; test 说明了当前 loader 能处理那些类型的文件</span><br><span class="line">                &#x2F;&#x2F; use 则指定了 loader 的类型。</span><br><span class="line">                &#x2F;&#x2F; 注意：数组中的loader不能省略扩展名</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.在<code>main.js</code>中获取<code>css</code>目录中的<code>main.css</code>文件,webpack会根据入口文件所有依赖的文件进行打包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1、获取index.html中的dom对象</span><br><span class="line">var first &#x3D; document.getElementById(&#39;first&#39;);</span><br><span class="line">var btn &#x3D; document.getElementById(&#39;btn&#39;);</span><br><span class="line">var two &#x3D; document.getElementById(&#39;two&#39;);</span><br><span class="line">var res &#x3D; document.getElementById(&#39;res&#39;);</span><br><span class="line">    btn.onclick &#x3D; function()&#123;</span><br><span class="line">        var firstValue &#x3D; parseFloat(first.value);</span><br><span class="line">        var twoValue &#x3D; parseFloat(two.value);</span><br><span class="line">        &#x2F;&#x2F;2、获取 module1.js中的 sum函数</span><br><span class="line">        &#x2F;&#x2F;http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;2015&#x2F;05&#x2F;require.html</span><br><span class="line">        var sum &#x3D; require(&#39;.&#x2F;module1.js&#39;);</span><br><span class="line">        res.value &#x3D; sum(firstValue,twoValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 3、获取css目录中的main.css文件</span><br><span class="line">    require(&#39;..&#x2F;css&#x2F;main.css&#39;);</span><br></pre></td></tr></table></figure>

<p>在终端中输入<code>webpack</code>命令进行css文件打包</p>
<h2 id="实现SCSS打包"><a href="#实现SCSS打包" class="headerlink" title="实现SCSS打包"></a>实现SCSS打包</h2><p>本地安装对应的loader</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install sass-loader node-sass webpack --save-dev</span><br></pre></td></tr></table></figure>

<p>在src目录中新建 sass目录–&gt; scss1.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; scss1.scss文件</span><br><span class="line">$color:purple;</span><br><span class="line">#two&#123;</span><br><span class="line">    border:1px solid $color; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>webpack.config.js</code>中配置相关的loader,<strong>注意:</strong>在<code>rules</code>数组中配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: &#x2F;\.scss$&#x2F;,</span><br><span class="line">    &#x2F;&#x2F; 注意 是sass-loader,不是 scss-loader</span><br><span class="line">    &#x2F;&#x2F;安装:cnpm install sass-loader css-loader style-loader node-sass webpack --save-dev</span><br><span class="line">    use: [ &#39;style-loader&#39;, &#39;css-loader&#39;, &#39;sass-loader&#39; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在js目录中 main.js里面引入 scss1.scss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 4、获取sass目录中的scss1.scss文件</span><br><span class="line">require(&#39;..&#x2F;sass&#x2F;scss1.scss&#39;);</span><br></pre></td></tr></table></figure>

<p>在终端中输入 <code>webpack</code>命令进行scss文件打包</p>
<h2 id="实现Less打包"><a href="#实现Less打包" class="headerlink" title="实现Less打包"></a>实现Less打包</h2><p>本地安装对应的loader加载器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install less less-loader css-loader style-loader  webpack --save-dev</span><br></pre></td></tr></table></figure>

<p>在在src目录中新建less目录–&gt; less1.less</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@color:blue;</span><br><span class="line">#res&#123;</span><br><span class="line">    border:1px dashed blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>webpack.config.js</code>中配置相关的loader,<strong>注意:</strong>在<code>rules</code>数组中配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 实现 less 打包</span><br><span class="line">&#123;</span><br><span class="line">    test: &#x2F;\.less$&#x2F;,</span><br><span class="line">    use: [ &#39;style-loader&#39;, &#39;css-loader&#39;, &#39;less-loader&#39; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在js目录中 main.js里面引入 less1.less文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 5、获取less目录中的less1.less文件</span><br><span class="line">require(&#39;..&#x2F;less&#x2F;less1.less&#39;);</span><br></pre></td></tr></table></figure>

<p>在终端中输入 <code>webpack</code>命令进行scss文件打包</p>
<h2 id="实现打包url资源（图片、gif、图标等）功能"><a href="#实现打包url资源（图片、gif、图标等）功能" class="headerlink" title="实现打包url资源（图片、gif、图标等）功能"></a>实现打包url资源（图片、gif、图标等）功能</h2><ol>
<li><p>在src 目录中 新建imgs目录，放入两张不同大小的图片</p>
</li>
<li><p>在index.html中新增 <code>&lt;div id=&quot;bg1&quot;&gt;&lt;/div&gt;</code> <code>&lt;div id=&quot;bg2&quot;&gt;&lt;/div&gt;</code></p>
</li>
<li><p>在css文件夹新增–&gt;icons-extra.css</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#bg1&#123;</span><br><span class="line">    width: 1500px;</span><br><span class="line">    height: 500px;</span><br><span class="line">    background: url(&#39;..&#x2F;imgs&#x2F;vue1.png&#39;) no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#bg2&#123;</span><br><span class="line">    width: 500px;</span><br><span class="line">    height: 500px;</span><br><span class="line">    background: url(&#39;..&#x2F;imgs&#x2F;vue_cover_logo.png&#39;) no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>本地安装loader加载器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install url-loader file-loader --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>在webpack.config.js中配置相关的loader</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 实现 url 资源打包</span><br><span class="line">          &#123;</span><br><span class="line">              &#x2F;&#x2F; 图片和字体文件使用 url-loader 来处理</span><br><span class="line">              test: &#x2F;\.(png|jpg|gif|ttf|eot|woff|woff2|svg)$&#x2F;,</span><br><span class="line">              use: [</span><br><span class="line">                  &#123;</span><br><span class="line">                      loader: &#39;url-loader&#39;,</span><br><span class="line">                      &#x2F;&#x2F; options 为可以配置的选项</span><br><span class="line">                      options: &#123;</span><br><span class="line">                          limit: 8192</span><br><span class="line">                          &#x2F;&#x2F; limit&#x3D;8192表示将所有小于8kb的图片都转为base64形式（为什么                               呢？因为一个很小的图片，不值当的去发送一个请求，减少请求次                               数。）</span><br><span class="line">                          &#x2F;&#x2F; （其实应该说超过8kb的才使用 url-loader 来映射到文件，否                              则转为dataurl形式）</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">            ]</span><br><span class="line">             &#x2F;&#x2F;保证输出的图片名称与之前命名的图片名称保持一致(目前只是支持这样的写法，                   webpack3 没有响应的options进行配置)</span><br><span class="line">            use:&#39;url-loader?limit&#x3D;8192&amp;name&#x3D;[path][name].[ext]&#39; </span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>在main.js中引入css目录中icons-extra.css的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 6、获取src目录中的mui目录中icons-extra.css的文件</span><br><span class="line">require(&#39;..&#x2F;mui&#x2F;css&#x2F;icons-extra.css&#39;);</span><br></pre></td></tr></table></figure>

<p>在终端中输入 <code>webpack</code>命令进行scss文件打包</p>
</li>
</ol>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>如果我们希望在页面引入图片（包括img的src和background的url）。当我们基于webpack进行开发时，引入图片会遇到一些问题。</p>
<p>其中一个就是引用路径的问题。拿background样式用url引入背景图来说，我们都知道，webpack最终会将各个模块打包成一个文件，因此我们样式中的url路径是相对入口html页面的，而不是相对于原始css文件所在的路径的。这就会导致图片引入失败。这个问题是用file-loader解决的，file-loader可以解析项目中的url引入（不仅限于css），根据我们的配置，将图片拷贝到相应的路径，再根据我们的配置，修改打包后文件引用路径，使之指向正确的文件。<br> 另外，如果图片较多，会发很多http请求，会降低页面性能。这个问题可以通过url-loader解决。url-loader会将引入的图片编码，生成dataURl。相当于把图片数据翻译成一串字符。再把这串字符打包到文件中，最终只需要引入这个文件就能访问图片了。当然，如果图片较大，编码会消耗性能。因此url-loader提供了一个limit参数，小于limit字节的文件会被转为DataURl，大于limit的还会使用file-loader进行copy。<br>url-loader和file-loader是什么关系呢？简答地说，url-loader封装了file-loader。url-loader不依赖于file-loader，即使用url-loader时，只需要安装url-loader即可，不需要安装file-loader，因为url-loader内置了file-loader。通过上面的介绍，我们可以看到，url-loader工作分两种情况：</p>
<ol>
<li>文件大小小于limit参数，url-loader将会把文件转为DataURL；</li>
<li>文件大小大于limit，url-loader会调用file-loader进行处理，参数也会直接传给file-loader。因此我们只需要安装url-loader即可。</li>
</ol>
<p><strong>百度查配置文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F; 入口文件路径，__dirname是根目录</span><br><span class="line">    entry: __dirname + &#39;&#x2F;src&#x2F;main.js&#39;,</span><br><span class="line">    &#x2F;&#x2F; 打包生成文件</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: __dirname + &#39;&#x2F;output&#39;,</span><br><span class="line">        filename: &#39;main.js&#39;</span><br><span class="line">    &#125;,</span><br><span class="line"> </span><br><span class="line">    module: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: &#x2F;\.css$&#x2F;,</span><br><span class="line">                use: [&#39;style-loader&#39;, &#39;css-loader&#39;]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: &#x2F;\.jpeg$&#x2F;,</span><br><span class="line">                use: &#39;url-loader?limit&#x3D;1024&amp;name&#x3D;[path][name].[ext]&amp;outputPath&#x3D;img&#x2F;&amp;publicPath&#x3D;output&#x2F;&#39;,</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 这里涉及到了4个参数：limit、name、outputPath、publicPath。</p>
<ul>
<li><p><code>limit</code>参数就是告诉url-loader，在文件小于多少个字节时，将文件编码并返回DataURL。</p>
</li>
<li><p><code>name</code>表示输出的文件名规则，如果不添加这个参数，输出的就是默认值：文件哈希。加上[path]表示输出文件的相对路径与当前文件相对路径相同，加上[name].[ext]则表示输出文件的名字和扩展名与当前相同。加上[path]这个参数后，打包后文件中引用文件的路径也会加上这个相对路径。</p>
<blockquote>
<p>不加[path],可能引图片路径会找不到404</p>
</blockquote>
<p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/QQ%E6%88%AA%E5%9B%BE20200612163236.png" alt=""></p>
<blockquote>
<p>加[path]打包后文件中引用文件的路径也会加上这个相对路径。</p>
</blockquote>
<p><img src="http://qanu3nz77.bkt.clouddn.com/zysheep/QQ%E6%88%AA%E5%9B%BE20200612163332.png" alt=""></p>
</li>
<li><p><code>outputPath</code>表示输出文件路径前缀。图片经过url-loader打包都会打包到指定的输出文件夹下。但是我们可以指定图片在输出文件夹下的路径。比如outputPath=img/，图片被打包时，就会在输出文件夹下新建（如果没有）一个名为img的文件夹，把图片放到里面。</p>
</li>
<li><p><code>publicPath</code>表示打包文件中引用文件的路径前缀，如果你的图片存放在CDN上，那么你上线时可以加上这个参数，值为CDN地址，这样就可以让项目上线后的资源引用路径指向CDN了。</p>
</li>
</ul>
<h2 id="Webpack-dev-server结合后端服务器的热替换配置"><a href="#Webpack-dev-server结合后端服务器的热替换配置" class="headerlink" title="Webpack-dev-server结合后端服务器的热替换配置"></a>Webpack-dev-server结合后端服务器的热替换配置</h2><p><code>webpack-dev-server</code>提供了一个简单的 web 服务器，并且能够实现热加载 并且自动刷新浏览器，<code>html-webpack-plugin</code>插件根据html模板在内存生成html文件，它的工作原理是根据模板文件在内存中生成一个index.html文件。这样的话，即使我们的目录中没有了相关js等文件，还能够加载出来，这样能够提高我们页面运行速度。</p>
<blockquote>
<p>安装 <code>webpack-dev-server</code> 插件和<code>html-webpack-plugin</code>插件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cnpm install webpack-dev-server --save-dev </span><br><span class="line"></span><br><span class="line">cnpm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>

<p>在webpack.config.js中配置<code>webpack-dev-server</code></p>
<blockquote>
<p>注意:与module同级</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">     &#x2F;&#x2F; contentBase: &#39;.&#x2F;dist&#39;,</span><br><span class="line">     &#x2F;&#x2F; 在 localhost:8080(默认) 下建立服务，将 dist 目录下的文件，作为可访问文件  contentBase：告诉服务器从哪里提供内容</span><br><span class="line">     contentBase: path.join(__dirname, &quot;dist&quot;),</span><br><span class="line">     compress: true,</span><br><span class="line">     &#x2F;&#x2F; 当它被设置为true的时候对所有的服务器资源采用gzip压缩</span><br><span class="line">     &#x2F;&#x2F; 对JS，CSS资源的压缩率很高，可以极大得提高文件传输的速率，从而提升web性能</span><br><span class="line">     port: 9000, &#x2F;&#x2F; 如果想要改端口，可以通过 port更改</span><br><span class="line">     hot: true, &#x2F;&#x2F; 启用 webpack 的模块热替换特性()</span><br><span class="line">     inline: true, &#x2F;&#x2F; 实现实时重载（实现自动刷新功能）默认情况下是 true。</span><br><span class="line">     host: &quot;localhost&quot; &#x2F;&#x2F; 如果你希望服务器外部可访问，指定使用一个 host。默认是 localhost(也就是你可以不写这个host这个配置属性)。</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>在package.json中配置script </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;start&quot;: &quot;webpack-dev-server --open&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;&quot;start&quot;: &quot;webpack-dev-server --open --port 8080 --hot --inline&quot; </span><br><span class="line">&#x2F;&#x2F; 如果在这里配置了，就不用在webpack.config.js中配置devServer属性了。</span><br><span class="line">--inline：自动刷新</span><br><span class="line">--hot：热加载 </span><br><span class="line">--port：指定端口 </span><br><span class="line">--open：自动在默认浏览器打开</span><br><span class="line">--host：可以指定服务器的 ip，不指定则为127.0.0.1，如果对外发布则填写公网ip地址</span><br></pre></td></tr></table></figure>

<p>在webpack.config.js中配置<code>html-webpack-plugin</code></p>
<blockquote>
<p>需要引入html-webpack-plugin 插件与webpack,并且与module同级</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;&#x2F; 引入html-webpack-plugin 插件</span><br><span class="line">const HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;);</span><br><span class="line">const webpack &#x3D; require(&#39;webpack&#39;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: &#39;首页&#39;, &#x2F;&#x2F; 用于生成的HTML文档的标题</span><br><span class="line">            filename: &#39;index.html&#39;, &#x2F;&#x2F;写入HTML的文件。默认为index.html。也可以指定一个子目录（例如：）assets&#x2F;admin.html</span><br><span class="line">            template: &#39;index.html&#39; &#x2F;&#x2F; Webpack需要模板的路径</span><br><span class="line">        &#125;),</span><br><span class="line">        new webpack.HotModuleReplacementPlugin() &#x2F;&#x2F; 需要结合 启用热替换模块(Hot Module Replacement)，也被称为 HMR</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<p>此时<code>package.json</code>的文件内容如下： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;webpacktest&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;node测试&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;webpack.config.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">    &quot;start&quot;: &quot;webpack-dev-server --open&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;zysheep&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;css-loader&quot;: &quot;^3.5.3&quot;,</span><br><span class="line">    &quot;file-loader&quot;: &quot;^6.0.0&quot;,</span><br><span class="line">    &quot;html-webpack-plugin&quot;: &quot;^4.3.0&quot;,</span><br><span class="line">    &quot;less&quot;: &quot;^3.11.3&quot;,</span><br><span class="line">    &quot;less-loader&quot;: &quot;^6.1.1&quot;,</span><br><span class="line">    &quot;node-sass&quot;: &quot;^4.14.1&quot;,</span><br><span class="line">    &quot;sass-loader&quot;: &quot;^8.0.2&quot;,</span><br><span class="line">    &quot;style-loader&quot;: &quot;^1.2.1&quot;,</span><br><span class="line">    &quot;url-loader&quot;: &quot;^4.1.0&quot;,</span><br><span class="line">    &quot;webpack&quot;: &quot;^4.43.0&quot;,</span><br><span class="line">    &quot;webpack-cli&quot;: &quot;^3.3.11&quot;,</span><br><span class="line">    &quot;webpack-dev-server&quot;: &quot;^3.11.0&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时<code>webpack.config.js</code>的文件内容如下： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">const path &#x3D; require(&#39;path&#39;);  &#x2F;&#x2F; 首先要引入node.js中path 模块，用于处理文件与目录的路径</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; const 命令声明一个只读的常量，一旦声明，值不可以改变，改变会报错；只声明不赋值也会报错</span><br><span class="line">&#x2F;&#x2F; 常量存储的是一个不可以变化的变量。</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 引入html-webpack-plugin 插件</span><br><span class="line">const HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;);</span><br><span class="line">const webpack &#x3D; require(&#39;webpack&#39;);</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">    entry: &#39;.&#x2F;src&#x2F;.&#x2F;js&#x2F;main.js&#39;, &#x2F;&#x2F; 指定入口文件</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, &#39;.&#x2F;dist&#39;), &#x2F;&#x2F; 指定出口文件的路径目录</span><br><span class="line">        filename: &#39;bulid.js&#39; &#x2F;&#x2F; 制定出口文件的名称</span><br><span class="line">    &#125;,</span><br><span class="line">	 module:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">        &#x2F;&#x2F; 在webpack2中，loaders 被替换成了 rules 其实就是loader的规则</span><br><span class="line">            &#x2F;&#x2F;安装 cnpm install css-loader style-loader --save-dev</span><br><span class="line">            &#123;</span><br><span class="line">                test: &#x2F;\.css$&#x2F;,</span><br><span class="line">                use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ]</span><br><span class="line">                &#x2F;&#x2F; test 说明了当前 loader 能处理那些类型的文件</span><br><span class="line">                &#x2F;&#x2F; use 则指定了 loader 的类型。</span><br><span class="line">                &#x2F;&#x2F; 注意：数组中的loader不能省略扩展名</span><br><span class="line">            &#125;,</span><br><span class="line">			&#123;</span><br><span class="line">                   test: &#x2F;\.scss$&#x2F;,</span><br><span class="line">                   &#x2F;&#x2F; 注意 是sass-loader,不是 scss-loader</span><br><span class="line">                    &#x2F;&#x2F;安装:cnpm install sass-loader css-loader style-loader node-sass webpack --save-dev</span><br><span class="line">                   use: [ &#39;style-loader&#39;, &#39;css-loader&#39;, &#39;sass-loader&#39; ]</span><br><span class="line">            &#125;,</span><br><span class="line">			  &#x2F;&#x2F; 实现 less 打包  安装:cnpm install less less-loader css-loader style-loader  webpack --save-dev</span><br><span class="line">            &#123;</span><br><span class="line">                test: &#x2F;\.less$&#x2F;,</span><br><span class="line">                use: [ &#39;style-loader&#39;, &#39;css-loader&#39;, &#39;less-loader&#39; ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#x2F;&#x2F; 实现 url 资源打包</span><br><span class="line">            &#123;</span><br><span class="line">                &#x2F;&#x2F; 图片和字体文件使用 url-loader来处理</span><br><span class="line">                &#x2F;&#x2F;安装:cnpm install url-loader file-loader --save-dev</span><br><span class="line">                test: &#x2F;\.(png|jpg|gif|ttf|eot|woff|woff2|svg)$&#x2F;,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: &#39;url-loader&#39;,</span><br><span class="line">                        &#x2F;&#x2F; options 为可以配置的选项</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            limit: 8192</span><br><span class="line">                            &#x2F;&#x2F; limit&#x3D;8192表示将所有小于8kb的图片都转为base64形式（为什么呢？因为一个很小的图片，不值当的去发送一个请求，减少请求次                               数。）</span><br><span class="line">                            &#x2F;&#x2F;(其实应该说超过8kb的才使用 url-loader 来映射到文件，否则转为dataurl形式)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                &#x2F;&#x2F;保证输出的图片名称与之前命名的图片名称保持一致(目前只是支持这样的写法，webpack3 没有响应的options进行配置)另外一种写法</span><br><span class="line">                 use:&#39;url-loader?limit&#x3D;8192&amp;name&#x3D;[path][name].[ext]&#39;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        &#x2F;&#x2F; contentBase: &#39;.&#x2F;dist&#39;,</span><br><span class="line">        &#x2F;&#x2F; 在 localhost:8080(默认) 下建立服务，将 dist 目录下的文件，作为可访问文件  contentBase：告诉服务器从哪里提供内容</span><br><span class="line">        contentBase: path.join(__dirname, &quot;dist&quot;),</span><br><span class="line">        compress: true,</span><br><span class="line">        &#x2F;&#x2F; 当它被设置为true的时候对所有的服务器资源采用gzip压缩</span><br><span class="line">        &#x2F;&#x2F; 对JS，CSS资源的压缩率很高，可以极大得提高文件传输的速率，从而提升web性能</span><br><span class="line">        port: 9000, &#x2F;&#x2F; 如果想要改端口，可以通过 port更改</span><br><span class="line">        hot: true, &#x2F;&#x2F; 启用 webpack 的模块热替换特性()</span><br><span class="line">        inline: true, &#x2F;&#x2F; 实现实时重载（实现自动刷新功能）默认情况下是 true。</span><br><span class="line">        host: &quot;localhost&quot; &#x2F;&#x2F; 如果你希望服务器外部可访问，指定使用一个 host。默认是 localhost(也就是你可以不写这个host这个配置属性)。</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new HtmlWebpackPlugin(&#123;</span><br><span class="line">            title: &#39;首页&#39;, &#x2F;&#x2F; 用于生成的HTML文档的标题</span><br><span class="line">            filename: &#39;index.html&#39;, &#x2F;&#x2F;写入HTML的文件。默认为index.html。也可以指定一个子目录（例如：）assets&#x2F;admin.html</span><br><span class="line">            template: &#39;index.html&#39; &#x2F;&#x2F; Webpack需要模板的路径</span><br><span class="line">        &#125;),</span><br><span class="line">        new webpack.HotModuleReplacementPlugin() &#x2F;&#x2F; 需要结合 启用热替换模块(Hot Module Replacement)，也被称为 HMR</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用<code>npm start</code>命令就可以实现浏览器自动更新。</p>
<p><strong>问题</strong>来了，HtmlWebpackPlugin中的 title并没有显示出来，原因是需要在定义的template模板中使用ejs语法，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;title&gt;&lt;%&#x3D; htmlWebpackPlugin.options.title%&gt;&lt;&#x2F;title&gt;</span><br></pre></td></tr></table></figure>

<p>再次使用<code>npm start</code>命令就可以啦。</p>
<h2 id="ES6转换为ES5语法"><a href="#ES6转换为ES5语法" class="headerlink" title="ES6转换为ES5语法"></a>ES6转换为ES5语法</h2><p>安装loader加载器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev babel-loader babel-core babel-preset-env</span><br></pre></td></tr></table></figure>

<ul>
<li><code>babel-core</code>如果某些代码需要调用Babel的API进行转码，就要使用<code>babel-core</code>模块</li>
<li><code>babel-preset-env</code>通过根据您的目标浏览器或运行时环境自动确定您需要的Babel插件</li>
</ul>
<p>配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: &#x2F;\.js$&#x2F;,</span><br><span class="line">        exclude: &#x2F;(node_modules)&#x2F;,  &#x2F;&#x2F; exclude 排除的意思，把 node_modules文件夹排除编译之外</span><br><span class="line">        use: &#123;</span><br><span class="line">            loader: &#39;babel-loader&#39;,</span><br><span class="line">            options: &#123;</span><br><span class="line">            &#x2F;&#x2F; presets 预设列表（一组插件）加载和使用</span><br><span class="line">            presets: [&#39;env&#39;],</span><br><span class="line">            plugins: [&#39;transform-runtime&#39;] &#x2F;&#x2F; 加载和使用的插件列表</span><br><span class="line">            &#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把一些代码改成ES6 语法的写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;moudule1.js</span><br><span class="line"></span><br><span class="line">function sum(x,y)&#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 导出 sum 函数</span><br><span class="line">&#x2F;&#x2F; module.exports &#x3D; sum;</span><br><span class="line">    &#x2F;&#x2F; 改成ES6 的写法语法</span><br><span class="line">export default&#123;</span><br><span class="line">    sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">var first &#x3D; document.getElementById(&#39;first&#39;);</span><br><span class="line">   var btn1 &#x3D; document.getElementById(&#39;btn1&#39;);</span><br><span class="line">   var two &#x3D; document.getElementById(&#39;two&#39;);</span><br><span class="line">   var res &#x3D; document.getElementById(&#39;res&#39;);</span><br><span class="line">   console.log(1);</span><br><span class="line">   btn1.onclick &#x3D; function() &#123;</span><br><span class="line">       var firstValue &#x3D; parseFloat(first.value);</span><br><span class="line">       var twoValue &#x3D; parseFloat(two.value);</span><br><span class="line">       &#x2F;&#x2F;2、获取 module1.js中的 sum函数</span><br><span class="line">       &#x2F;&#x2F;http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;2015&#x2F;05&#x2F;require.html</span><br><span class="line">       console.log(2);</span><br><span class="line">     </span><br><span class="line">       &#x2F;* var sum &#x3D; require(&#39;.&#x2F;module1.js&#39;);</span><br><span class="line">        res.value &#x3D; sum(firstValue,twoValue);*&#x2F;</span><br><span class="line">       res.value &#x3D; sumObj.sum(firstValue, twoValue);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; 3、获取css目录中的main.css文件</span><br><span class="line">   &#x2F;&#x2F; require(&#39;..&#x2F;css&#x2F;main.css&#39;);</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F;  把步骤3 改为 ES6写法,引入css目录中的main.css文件</span><br><span class="line">   import &#39;..&#x2F;css&#x2F;main.css&#39;;</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; 4、获取sass目录中的scss1.scss文件</span><br><span class="line">   require(&#39;..&#x2F;sass&#x2F;scss1.scss&#39;);</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; 5、获取less目录中的less1.less文件</span><br><span class="line">   require(&#39;..&#x2F;less&#x2F;less1.less&#39;);</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; 6、获取src目录中的mui目录中icons-extra.css的文件</span><br><span class="line">   require(&#39;..&#x2F;mui&#x2F;css&#x2F;icons-extra.css&#39;);</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; 把 var sum &#x3D; require(&#39;.&#x2F;module1.js&#39;); 写成 ES6语法</span><br><span class="line">   import sumObj from &#39;.&#x2F;module1.js&#39;</span><br></pre></td></tr></table></figure>

<h2 id="防止文件缓存（生成带有20位的hash值的唯一文件）"><a href="#防止文件缓存（生成带有20位的hash值的唯一文件）" class="headerlink" title="防止文件缓存（生成带有20位的hash值的唯一文件）"></a>防止文件缓存（生成带有20位的hash值的唯一文件）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.config.js</span><br><span class="line"></span><br><span class="line">output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, &#39;dist&#x2F;js&#39;), &#x2F;&#x2F; 指定出口文件的路径目录</span><br><span class="line">        &#x2F;&#x2F; filename: &#39;bulid.js&#39; &#x2F;&#x2F; 制定出口文件的名称</span><br><span class="line">        filename: &#39;[name].[hash].js&#39; &#x2F;&#x2F; 将入口文件重命名为带有20位的hash值的唯一文件</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="抽取CSS为单独文件"><a href="#抽取CSS为单独文件" class="headerlink" title="抽取CSS为单独文件"></a>抽取CSS为单独文件</h2><p>安装插件从 build.js文件中提取文本（CSS）到单独的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save-dev extract-text-webpack-plugin</span><br></pre></td></tr></table></figure>

<blockquote>
<p>打包出错 Tapable.plugin is deprecated. Use new API on <code>.hooks</code> instead<br>原因 extract-text-webpack-plugin目前版本不支持webpack4。<br>解决方案  使用extract-text-webpack-plugin的最新的beta版<br>cnpm install  -D extract-text-webpack-plugin@next</p>
</blockquote>
<p>在webpack.config.js中配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const ExtractTextPlugin &#x3D; require(&quot;extract-text-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 从 bundle 中提取文本（CSS）到单独的文件      </span><br><span class="line">new ExtractTextPlugin(&#123;</span><br><span class="line">    &#x2F;&#x2F;  提取css，并重名为带有 20位的hash值的唯一文件</span><br><span class="line">    filename: &#39;[name].[hash].css&#39;,</span><br><span class="line">    &#x2F;&#x2F; 将所有的独立文件模块（这里指的是css文件）合并成一个文件</span><br><span class="line">    allChunks: true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="开发环境和生产环境的分离"><a href="#开发环境和生产环境的分离" class="headerlink" title="开发环境和生产环境的分离"></a>开发环境和生产环境的分离</h2><blockquote>
<p>开发环境与生产环境分离的原因如下：</p>
</blockquote>
<ul>
<li>在开发环境中，我们使用热更新插件帮助我们实现浏览器的自动更新功能，我们的代码没有进行压缩，如果压缩了不方便我们调试代码等等，所以以上这些代码不应出现在生产环境中。</li>
<li>生产环境中，我们把项目部署到服务器时，我们会对代码进行各种各样的优化，比如压缩代码等等，这时候我们不应该把这些代码放到开发环境中，不利于代码开发和调试。</li>
</ul>
<p>总结：针对以上这些说明，我们很有必要把区分开发环境与生产环境分离。</p>
<blockquote>
<p>开发环境的配置和生产换环境配置的区别。</p>
</blockquote>
<ul>
<li>开发环境有的配置，生产环境不一定有，比如说热更新时使用到的<code>HotModuleReplacementPlugin</code>。</li>
<li>生产环境有的配置，开发环境不一定有，比如说用来压缩js用的<code>UglifyJsPlugin</code>。</li>
</ul>
<blockquote>
<p>如何去做？</p>
</blockquote>
<ol>
<li><p>因为webpack 默认找的是 webpack.config.js配置文件，所以要把开发环境的webpack.config.js配置文件改为webpack.dev.config.js代表开发环境的配置文件。</p>
</li>
<li><p>新建一个webpack.prod.config.js，再把开发环境中的webpack.config.js复制进去（<strong>没用的配置文件该删除的删除</strong>）</p>
</li>
<li><p>修改package.json文件（在<code>scripts</code> 标签中添加<code>&quot;dev&quot;</code>和<code>&quot;prod&quot;</code> 属性配置）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">       &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">       &quot;dev&quot;: &quot;webpack --config webpack.dev.config.js&quot;,</span><br><span class="line">       &quot;prod&quot;: &quot;webpack --config webpack.prod.config.js&quot;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>怎样执行命令</p>
<ul>
<li>执行开发环境的中配置  <code>cnpm run dev</code></li>
<li>执行生产环境的中配置  <code>cnpm run prod</code></li>
</ul>
</li>
</ol>
<h3 id="在生产环境中配置代码压缩功能"><a href="#在生产环境中配置代码压缩功能" class="headerlink" title="在生产环境中配置代码压缩功能"></a>在生产环境中配置代码压缩功能</h3><p>安装插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install  --save-dev  terser-webpack-plugin</span><br></pre></td></tr></table></figure>

<p>配置<code>webpack.prod.config.js</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">devtool: &quot;source-map&quot;,</span><br><span class="line">  &#x2F;&#x2F; js代码 压缩</span><br><span class="line">  optimization: &#123;</span><br><span class="line">      minimizer: [</span><br><span class="line">          new TerserPlugin(&#123;</span><br><span class="line">              cache: true, &#x2F;&#x2F; 开启缓存</span><br><span class="line">              parallel: true, &#x2F;&#x2F; 支持多进程</span><br><span class="line">              sourceMap: true,</span><br><span class="line">          &#125;),</span><br><span class="line">      ]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>执行<code>cnpm run prod</code> 命令</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">三月三</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zysheep.cn/2020/03/06/Vue/webpack%E5%AE%9E%E8%B7%B5/">https://zysheep.cn/2020/03/06/Vue/webpack实践/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zysheep.cn" target="_blank">三月三</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a><a class="post-meta__tags" href="/tags/js/">js</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/zysheep/picgo-imgs/img2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="https://cdn.jsdelivr.net/gh/zysheep/picgo-imgs/imgwechat.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="https://cdn.jsdelivr.net/gh/zysheep/picgo-imgs/imgalipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/03/06/Nginx/Nginx%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/"><img class="prev_cover" src="http://qanu3nz77.bkt.clouddn.com/zysheep/nginx_logo.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Nginx的前世今生</div></div></a></div><div class="next-post pull_right"><a href="/2020/03/05/Linux/Linux%E4%B8%BA%E4%BD%95%E5%A6%82%E6%AD%A4%E6%9C%89%E8%B6%A3/"><img class="next_cover" src="http://qanu3nz77.bkt.clouddn.com/zysheep/linux_PNG42.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux为何如此有趣</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/03/05/Vue/Vue.js/" title="Vue.js入门宝典"><img class="relatedPosts_cover" src="http://qanu3nz77.bkt.clouddn.com/zysheep/vue_cover_logo.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-03-05</div><div class="relatedPosts_title">Vue.js入门宝典</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '7aaa3f830ce67c87d829',
  clientSecret: 'e50657367f1240f2c12596cac63badfaae13fe3b',
  repo: 'blog-comment',
  owner: 'zysheep',
  admin: ['zysheep'],
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN',
  perPage: 10,
  distractionFreeMode: false,
  pagerDirection: 'last',
  createIssueManually: false,
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  try {
    document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
  } catch (e) {
    return false
  }
}</script></div></article></main><footer id="footer" style="background-image: url(http://qanu3nz77.bkt.clouddn.com/zysheep/vue8.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 三月三</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text"><a href="http://zysheep.github.io/" target="_blank" rel="noopener">三月三</a>,专门为你制造快乐的网站</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/third-party/click_heart.js"></script><script src="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/js/hideCategory.min.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script></body></html>